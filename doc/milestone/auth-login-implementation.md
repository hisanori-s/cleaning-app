# 認証機能の実装計画書

## 重要な注意事項
- ⚠️ APIの仕様について
  - APIはユーザー情報の配列を返すのみ
  - ユーザー認証の判定はフロントエンド側で行う必要がある
  - APIにユーザー名とパスワードを送信して認証する仕様ではない
  - 将来的にバックエンドで認証を行う場合は、この実装を変更する必要がある

## 実装方針

### 1. 認証ロジックの集約
- `use-auth.tsx`にすべての認証ロジックを集約
- コンポーネントマウント時にユーザーリストを取得
- 取得したユーザーリストをステートとして保持
- ログイン時はユーザーリストと照合

### 2. コードの責務分離

#### `src/api/wordpress.ts`
- ユーザー情報取得APIの呼び出し
- エラーハンドリング
- レスポンスの型定義

#### `src/hooks/use-auth.tsx`
- ユーザーリストの取得と保持
- 認証状態の管理
- ログイン処理（ユーザー照合）
- キャッシュ管理

#### `src/pages/auth/page.tsx`
- ログインフォームのUI
- エラー表示
- ローディング状態の管理

## 実装手順

1. `wordpress.ts`の修正
   - ユーザー関連のモックデータを削除
   - APIエンドポイントの整理
   - エラーハンドリングの改善

2. `use-auth.tsx`の修正
   - ユーザーリスト管理の追加
   - 認証ロジックの実装
   - 不要なAPI呼び出しコードの削除

3. `page.tsx`の修正
   - ビジネスロジックの削除
   - UIロジックの整理
   - エラーハンドリングの改善

## テスト項目

1. ユーザーリストの取得
   - アプリ起動時に正しく取得できるか
   - エラー時の処理が適切か

2. ログイン処理
   - 正しいID/パスワードでログインできるか
   - 誤ったID/パスワードで適切なエラーが表示されるか
   - ログイン状態が正しく保持されるか

3. キャッシュ
   - ログイン情報が正しくキャッシュされるか
   - キャッシュからの復元が機能するか

## 将来的な改善点

1. セキュリティ強化
   - バックエンドでの認証処理の実装
   - トークンベースの認証への移行

2. エラーハンドリング
   - より詳細なエラーメッセージ
   - リトライ機能の実装

3. パフォーマンス
   - ユーザー数が増えた場合の対応
   - キャッシュ戦略の見直し 