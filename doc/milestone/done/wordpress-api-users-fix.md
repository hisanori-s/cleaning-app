# WordPressユーザーAPI修正計画書

## 現状の最優先課題
- API経由でのユーザー情報取得が機能していない
- POSTMANでは取得できているため、フロントエンド側の実装に問題がある可能性が高い
- モックデータが実データの取得を妨げている可能性が最も高い

## 現状の問題点

1. フロントエンド側の挙動
   - getUsers()がモックデータを返している可能性が高い（最優先で確認）
   - APIキーの実装はあるが、正しく機能しているか不明
   - デバッグ情報に表示されるユーザー情報がWPの実データと不一致

2. WordPress側の実装
   - 認証をスルー（`__return_true`）している（※現段階では意図的な仕様）
   - APIキー認証の実装が不完全（※現段階では対応不要）

## 原因分析

1. モックデータの問題（最優先対応）
   - `wordpress.ts`内のモックデータ処理が完全に無効化されていない
   - 開発環境判定による分岐処理の確認が必要

2. API認証の問題
   - WP側でAPIキー認証が実装されていない（※現段階では対応不要）
   - フロントエンド側でAPIキーの送信は実装されているが、WP側で検証されていない（※現段階では対応不要）

3. データ取得の問題
   - WP側のユーザーデータ取得ロジックは現状のまま使用（※現段階では修正不要）
   - データ構造は現状のモックデータと同じ形式で調整済み

## 修正計画（優先順位順）

### Phase 1: モックデータの整理（即時着手）
1. `wordpress.ts`内のモックデータ関連コードを確認
2. 不要なモックデータをコメントアウト
3. 開発環境判定の処理を適切に修正
4. APIリクエストのデバッグログを追加

### Phase 2: フロントエンド側の実装修正
1. APIリクエストの確認
   - ヘッダーの設定確認
   - エンドポイントURLの確認
2. エラーハンドリングの実装
3. デバッグ情報の拡充

### Phase 3: 動作検証
1. POSTMANでの動作確認結果との比較
2. デバッグ情報での取得データ確認
3. ログイン機能の動作確認

## 検証計画

1. POSTMANとの比較検証
   - リクエストヘッダーの比較
   - レスポンスデータの比較

2. フロントエンドでの動作確認
   - デバッグ情報でのAPI通信確認
   - 実データの取得確認
   - ログイン処理の確認

## 注意点

- モックデータの完全な無効化を最優先で行う
- デバッグ情報は詳細に表示し、API通信の状況を確認できるようにする
- 現段階では認証周りの改修は行わない
- WP側のデータ取得ロジックは現状のまま使用 