# AI実装ワークフロー

## 1. マイルストーンの作成と検証

### 1.1 マイルストーン作成の基本
- 保管場所: `project-root/doc/milestone/*.md`
- 作成前に既存の類似マイルストーンを確認
- テスト関連の場合は `@GUIDE_テスト環境ガイド.md` を必ず参照

### 1.2 品質チェックリスト
作成したマイルストーンに対して、以下の項目を確認：

1. **要件の明確性**
   - [ ] 各フェーズの目的が明確
   - [ ] 具体的な成功基準が定義されている
   - [ ] 禁止事項が明記されている

2. **ファイル管理**
   - [ ] 作業対象ファイルが明記されている
   - [ ] 既存ファイルとの関係が明確
   - [ ] 新規ファイル作成の必要性が検証されている

3. **テスト要件（テスト関連の場合）**
   - [ ] テストケースが明確に定義されている
   - [ ] モックデータの取り扱いが指定されている
   - [ ] テスト実行タイミングが明記されている

### 1.3 レビュー
- 作成後30秒以上時間を置いて再確認
- 矛盾点や曖昧な記述がないかチェック
- 見積もり工数の妥当性確認

## 2. マイルストーンの実行

### 2.1 フェーズ開始前の確認
1. **環境確認**
   - [ ] 必要なツールやライブラリの確認
   - [ ] 既存コードの状態確認
   - [ ] ブランチの状態確認

2. **事前検証**
   - [ ] 既存テストの実行
   - [ ] 既存の実装との整合性確認
   - [ ] 依存関係の確認

### 2.2 フェーズ実行中の検証
各タスク実行時に以下を確認：

1. **コード変更時**
   - [ ] リンター/型チェックの実行
   - [ ] 既存テストへの影響確認
   - [ ] コードフォーマットの適用

2. **テスト関連タスク**
   - [ ] テストコードの実際の実行
   - [ ] テスト結果のスクリーンショット保存
   - [ ] カバレッジの確認

### 2.3 フェーズ完了時の検証
1. **完了チェック**
   - [ ] マイルストーンの完了マーク更新
   - [ ] 実際のファイル変更の確認
   - [ ] 削除タスクの完了確認

2. **品質検証**
   ```bash
   # 必ず実行するコマンド
   npm run lint
   npm run type-check
   npm test
   ```

3. **ドキュメント更新**
   - [ ] コメントの追加/更新
   - [ ] 型定義の更新
   - [ ] READMEの更新（必要な場合）

### 2.4 最終確認
すべてのフェーズ完了後：

1. **総合テスト**
   ```bash
   # 全テストの実行
   npm run test:coverage
   
   # テスト結果の保存
   npm run test -- --json --outputFile=test-results.json
   ```

2. **成果物の確認**
   - [ ] すべての要件が満たされているか
   - [ ] テストカバレッジは十分か
   - [ ] 未解決の問題がないか

3. **コミットメッセージの生成**
   ```
   feat(component): 実装の概要

   - 変更点1
   - 変更点2
   
   テスト:
   - 追加したテスト
   - 更新したテスト
   
   関連チケット: #123
   ```

## 3. 報告時の注意点

### 3.1 必須情報
- 実行したテストの結果
- 変更したファイルの一覧
- 発生した問題と解決方法
- 残存している課題（ある場合）

### 3.2 添付情報
- テスト実行のスクリーンショット
- カバレッジレポート
- コミットメッセージ案

## 4. トラブルシューティング

### 4.1 テスト失敗時の対応
1. テストコードと実装の比較
2. モックデータの確認
3. テスト環境の確認
4. エラーログの詳細な分析

### 4.2 型エラー発生時の対応
1. 型定義の確認
2. インターフェースの整合性確認
3. 必要に応じた型の更新

### 4.3 その他の問題
- 環境変数の確認
- 依存関係の確認
- ビルドプロセスの確認 