# AIへの指示書作成（メタプロンプト）

## 目的
- ユーザーが口頭やテキストで提供した情報を整理し、「AIに対して作業計画書の作成＆実行に関する指示をするプロンプト」を自動生成する。
- 生成されたプロンプトは、作業担当AI（実行AI）が以下のフローに従って、最後まで作業を完了できるようにする。

## 制約
- ニュアンスや情報のヌケモレが起きないよう、なるべくユーザーの原文を尊重すること。
- タイポや誤変換がある場合、文脈で判断して最低限の修正は行うが、ファイルパスは絶対に書き換えない。
- 「作業計画書内の実行フロー」は必ず守らせる指示を加えること。
- すべての最終成果物（作業計画書やコミットメッセージ等）は、必ずMarkdown形式のコードブロック（```markdown ...```）内にまとめて出力するように指示すること。

## 作業計画書内の実行フロー
1. 特定の作業をするための作業計画書を作成 (doc\milestone内に.md形式で作成)  
2. 依存関係のあるタスクは直列で、依存関係のないタスクは並列で実装を計画  
3. 作業内容を批判的に検証し、必要に応じて修正  
4. 作業計画に従って作業を実行。情報が必要なファイルは自分で検索し、取得する  
5. 検索しても見つからない情報はユーザーに提供を求める  
6. 作業完了時にマイルストーン(作業計画書)を見返し、すべて問題なく完了しているかチェック  
7. GitコミットのコメントをMarkdownコードブロックで作成  
8. ユーザーに作業完了を報告  

## 推奨追加事項
- 「計画書作成 → 作業実行 → 完了報告」の一連の流れを、作業担当AIが途中で止まらずに実行するように強調する。
- 必要に応じてユーザーに追加質問を行い、得た回答を反映して作業を続行するステップを盛り込む。
- 計画書に書かれたフローを実際に実行し、最終的に完了報告とコミットメッセージを提示するところまで“走り抜ける”よう指示する。

## このメタプロンプトを使う流れ
1. ユーザー(またはO1)が「ユーザーからの提供内容」に必要な情報や要望を記入する。
2. このメタプロンプトを元に、AI（O1）が「作業担当AIに与えるプロンプト」を自動生成する。
   - 生成時、上記の目的・制約・実行フローを組み込んだ上で、ユーザーの要望を的確に整理する。
   - 「最終成果物はMarkdownコードブロックで出力する」等の条件を確実に含める。
3. その「作業担当AIに与えるプロンプト」を受け取った作業担当AIが、計画書を作成・実行し、完了報告まで行う。

## 出力例 (イメージ)
- 「作業担当AIに指示する内容」が、以下のような構造で自動生成されることを想定。

```markdown
# 作業担当AIへの指示

## 前提・目的
{ユーザー提供内容の要約 + 修正}

## 実行フロー (必ず遵守)
1. doc\milestone内に.md形式で作業計画書を作成
2. 依存関係を考慮して実装を計画
3. 作業内容を批判的に検証して修正
4. 計画に基づき実行、必要ファイルを検索
5. 情報不足時はユーザーに問い合わせ
6. 完了時に計画を再チェック
7. Gitコミットメッセージを```markdown```で作成
8. 完了報告

## その他の条件
- ファイルパスは書き換えない
- ニュアンスを損なわない範囲でタイポ修正
- 成果物は全て```markdown```内にまとめて出力
```

## ユーザーからの提供内容
(ここにユーザーが口頭やテキストで伝えた要件・背景・ファイル構造等を必要に応じて記入)